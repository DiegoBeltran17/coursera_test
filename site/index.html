<!DOCTYPE html>
<html>
 <head>
  <title>CSV File to HTML Table Using AJAX jQuery</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="https://assets.crowd.aws/crowd-html-elements.js"></script>

 </head>
 <body>
  <div class="container">
   <div class="table-responsive">
    <h1 align="center">CSV File to HTML Table Using AJAX jQuery</h1>

    <br />
    <div align="center">
     <button type="button" name="load_data" id="load_data" class="btn btn-info">Load Data</button>
    </div>

    <div id="employee_table">
    </div>
     <div>
    <p></p>
    <p><input type="hidden" value="" name="test" id="test"></p>
  </div>

<!--Codigo para leer archivos csv en java, no pude encontrar para html, 
encontre para que abrir una ventana y escoger, pero ne me funcionaba. -->

<script>
$(document).ready(function(){
 $('#load_data').click(function(){
  $.ajax({
   url:"sample1total.csv",
   dataType:"text",
   success:function(data)
   {
   	var linea = "";
    var employee_data = data.split(/\r?\n|\r/);
    var table_data = '<table class="table table-bordered table-striped">';
    for(var count = 0; count<employee_data.length; count++)
    {
     var cell_data = employee_data[count].split(",");
     linea = cell_data;
     document.getElementsByName("test").value = linea;
     table_data += '<tr>';
     for(var cell_count=0; cell_count<cell_data.length; cell_count++)
     {
     	
      if(count === 0)
      {

       table_data += '<th>'+cell_data[cell_count]+'</th>';


      }
      else
      {

       table_data += '<td>'+cell_data[cell_count]+'</td>';
      }
     }
     /*document.write(cell_data)[0];*/
     /*table_data += '</tr>';*/
    }
    table_data += '</table>';
         /*document.write(table_data);*/


   /*convierte la tabla de datos en html */      
    $('#employee_table').html(table_data);

         /*var variable=document.getElementsByTagName("td")[0].innerHTML;
         document.getElementById("prueba").innerHTML = variable;*/


    /*este codigo me permite leer una columna de la tabla, en nuestro caso es la de texto de tweets*/
	var tweets ="";
	$("#employee_table tr").find('td:eq(6)').each(function () {
	 
	 //obtenemos el valor de la celda
	  valor = $(this).html();
	  tweets += valor + ",";

	  /*var variable=document.getElementsByTagName("td")[valor].innerHTML;*/
      /*document.getElementById("prueba").innerHTML = tweets;*/

    var tweets_leido ="";

    /*esto es para acerlo un array list*/
	var lista_tweets = tweets.split(",");
	
	/*codigo me permite sacar la variable de java a html*/
	document.getElementById("prueba").innerHTML = tweets;

	/*esto es para recorrer la lista, pero al colocar el codigo para sacar la variable a html no me muestra.*/
	/*for (var i = 0; i < lista_tweets.length; i++) {
		document.write(lista_tweets[i]);
	}*/

	
	});

	



   }
  });
 

 });
 
});

</script>
<!--En esta parte tengo problemas para poder obtener los tweets individualmente, porque en el id="prueba" esta ya puede ser un array o un string separado por ",", es caso es que cuando recorro el array en java no puedo sacar los tweets uno por uno al html.
Lo que se podria hacer es colocar un chebox de java, pero no el que utiliza amazon.
Otra forma seria poder inclir el codigo html a java, pero no se como. -->
<p id="prueba"><crowd-checkbox name="likeBirds" checked="false" required></crowd-checkbox> </p>

    <crowd-form answer-format="flatten-objects">

  <crowd-instructions link-text="View instructions" link-type="button">
    <short-summary>
      <p>Provide a brief instruction here</p>
    </short-summary>

    <detailed-instructions>
      <h3>Provide more detailed instructions here</h3>
      <p>Include additional information</p>
    </detailed-instructions>

    <positive-example>
      <p>Provide an example of a good answer here</p>
      <p>Explain why it's a good answer</p>
    </positive-example>

    <negative-example>
      <p>Provide an example of a bad answer here</p>
      <p>Explain why it's a bad answer</p>
    </negative-example>
  </crowd-instructions>
  <div>
    <p><input type="hidden" value="" name="test" id="test"></p>
    <crowd-checkbox name="likeBirds" checked="false" required></crowd-checkbox>
  </div>
</crowd-form>
   </div>
  </div>

 </body>
</html>

